<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èœè°±è¯¦æƒ… - å°å°ç¾é£Ÿå®¶</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: white;
        }

        /* è¯¦æƒ…é¡µå¤´éƒ¨ */
        .detail-header {
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
            position: sticky;
            top: 0;
            background: white;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .back-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: #333;
            padding: 0.5rem;
        }

        /* æ”¶è—æŒ‰é’®æ ·å¼ï¼ˆå’Œæ–°å¢é¡µä¿æŒä¸€è‡´ï¼‰ */
        .detail-favorite-btn {
            padding: 0.6rem 1.2rem;
            background: #FFD700;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s;
        }

        .detail-favorite-btn.active {
            background: #d3c04c;
        }

        .detail-favorite-btn:hover {
            background: #d3c04c;
        }

        /* è¯¦æƒ…é¡µå›¾ç‰‡ */
        .detail-image {
            width: 100%;
            height: 220px;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 1.5rem;
        }

        /* è¯¦æƒ…é¡µå†…å®¹ */
        .detail-content {
            padding: 1.5rem;
        }

        .detail-title {
            font-size: 1.6rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .detail-meta-row {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }

        .detail-meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: #666;
        }

        .meta-label {
            font-weight: bold;
            color: #333;
        }

        .detail-section {
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.8rem;
            color: #333;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 18px;
            background: #e74c3c;
            border-radius: 2px;
        }

        /* é£Ÿæåˆ—è¡¨ */
        .ingredients-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 0.8rem;
            margin-bottom: 1rem;
        }

        .ingredient-item {
            background: #f8f9fa;
            padding: 0.8rem;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .ingredient-name {
            font-size: 0.9rem;
            margin-bottom: 0.3rem;
        }

        .ingredient-amount {
            font-size: 0.8rem;
            color: #888;
        }

        /* æ­¥éª¤åˆ—è¡¨ */
        .steps-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .step-item {
            display: flex;
            gap: 1rem;
        }

        .step-number {
            width: 28px;
            height: 28px;
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
            font-size: 0.95rem;
            line-height: 1.6;
            color: #444;
        }

        /* å°è´´å£« */
        .tips-box {
            background: #fff8e1;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            margin-top: 1rem;
        }

        .tips-title {
            font-weight: bold;
            color: #ff8f00;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .tips-content {
            font-size: 0.9rem;
            color: #66512c;
            line-height: 1.5;
        }

        /* åº•éƒ¨çƒ¹é¥ªæŒ‰é’®æ  */
        .detail-cook-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 1rem;
            background: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 90;
        }

        .detail-cook-btn {
            width: 100%;
            padding: 1rem;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            transition: background 0.3s;
        }

        .detail-cook-btn:hover {
            background: #c0392b;
        }
    </style>
</head>
<body>
<!-- è¯¦æƒ…é¡µå¤´éƒ¨ -->
<div class="detail-header">
    <button class="back-btn" onclick="goBack()">â† è¿”å›</button>
    <!-- æ”¹ä¸ºå’Œæ–°å¢é¡µä¸€è‡´çš„Buttonæ ·å¼ -->
    <button class="detail-favorite-btn" id="detailFavoriteBtn" onclick="toggleDetailFavorite()">ä¸€é”®æ”¶è—</button>
</div>

<!-- è¯¦æƒ…é¡µå›¾ç‰‡ -->
<div class="detail-image" id="detailImage">ğŸ³ ç•ªèŒ„ç‚’è›‹</div>

<!-- è¯¦æƒ…é¡µå†…å®¹ -->
<div class="detail-content">
    <h1 class="detail-title" id="detailTitle">ç•ªèŒ„ç‚’è›‹</h1>

    <!-- åŸºç¡€ä¿¡æ¯è¡Œ -->
    <div class="detail-meta-row">
        <div class="detail-meta-item">
            <span class="meta-label">åˆ†ç±»ï¼š</span>
            <span id="detailCategory">æ­£é¤</span>
        </div>
        <div class="detail-meta-item">
            <span class="meta-label">è€—æ—¶ï¼š</span>
            <span id="detailTime">15åˆ†é’Ÿ</span>
        </div>
        <div class="detail-meta-item">
            <span class="meta-label">éš¾åº¦ï¼š</span>
            <span id="detailDifficulty">â­ ç®€å•</span>
        </div>
        <div class="detail-meta-item">
            <span class="meta-label">åšè¿‡ï¼š</span>
            <span id="detailCookedCount">3 æ¬¡</span>
        </div>
    </div>

    <!-- é£Ÿæéƒ¨åˆ† -->
    <div class="detail-section">
        <h2 class="section-title">é£Ÿæå‡†å¤‡</h2>
        <div class="ingredients-list" id="detailIngredients">
            <!-- åŠ¨æ€å¡«å…… -->
        </div>
    </div>

    <!-- æ­¥éª¤éƒ¨åˆ† -->
    <div class="detail-section">
        <h2 class="section-title">çƒ¹é¥ªæ­¥éª¤</h2>
        <div class="steps-list" id="detailSteps">
            <!-- åŠ¨æ€å¡«å…… -->
        </div>

        <!-- å°è´´å£« -->
        <div class="tips-box" id="detailTips">
            <div class="tips-title">çƒ¹é¥ªå°è´´å£«</div>
            <div class="tips-content">
                <!-- åŠ¨æ€å¡«å…… -->
            </div>
        </div>
    </div>

    <!-- è¥å…»ä¿¡æ¯ -->
    <div class="detail-section">
        <h2 class="section-title">è¥å…»ä¿¡æ¯</h2>
        <div class="detail-meta-row" id="detailNutrition">
            <!-- åŠ¨æ€å¡«å…… -->
        </div>
    </div>
</div>

<!-- åº•éƒ¨çƒ¹é¥ªæŒ‰é’®æ  -->
<div class="detail-cook-bar">
    <button class="detail-cook-btn" id="detailCookBtn" onclick="startCooking()">å¼€å§‹çƒ¹é¥ªï¼ˆè®¡å…¥æ¬¡æ•°ï¼‰</button>
</div>

<script>
    // å®Œæ•´èœè°±è¯¦æƒ…æ•°æ®
    const recipeDetailData = {
        'ç•ªèŒ„ç‚’è›‹': {
            image: 'ğŸ³ ç•ªèŒ„ç‚’è›‹',
            title: 'ç•ªèŒ„ç‚’è›‹',
            category: 'æ­£é¤',
            time: '15åˆ†é’Ÿ',
            difficulty: 'â­ ç®€å•',
            cookedCount: 3,
            isFavorite: false,
            ingredients: [
                {name: 'ç•ªèŒ„', amount: '2ä¸ª'},
                {name: 'é¸¡è›‹', amount: '3ä¸ª'},
                {name: 'å°è‘±', amount: '2æ ¹'},
                {name: 'ç›', amount: 'é€‚é‡'},
                {name: 'ç³–', amount: '1å°å‹º'},
                {name: 'é£Ÿç”¨æ²¹', amount: '2å¤§å‹º'}
            ],
            steps: [
                'ç•ªèŒ„æ´—å‡€åˆ‡å—ï¼Œå°è‘±åˆ‡è‘±èŠ±ï¼Œé¸¡è›‹æ‰“å…¥ç¢—ä¸­åŠ å°‘è®¸ç›æ‰“æ•£å¤‡ç”¨ã€‚',
                'é”…ä¸­å€’æ²¹çƒ§çƒ­ï¼Œå€’å…¥è›‹æ¶²ç‚’è‡³å®šå‹åç››å‡ºå¤‡ç”¨ã€‚',
                'é”…ä¸­ç•™å°‘è®¸åº•æ²¹ï¼Œæ”¾å…¥ç•ªèŒ„å—ç¿»ç‚’è‡³å‡ºæ±ï¼ŒåŠ å°‘è®¸ç›å’Œç³–è°ƒå‘³ã€‚',
                'å€’å…¥ç‚’å¥½çš„é¸¡è›‹ï¼Œç¿»ç‚’å‡åŒ€åæ’’ä¸Šè‘±èŠ±å³å¯å‡ºé”…ã€‚'
            ],
            tips: '1. ç•ªèŒ„é€‰ç†Ÿé€çš„ä¼šæ›´å‡ºæ±ï¼Œå£æ„Ÿæ›´å¥½ï¼›<br>2. é¸¡è›‹ç‚’çš„æ—¶å€™ä¸è¦ç‚’å¤ªè€ï¼Œä¿æŒå«©æ»‘å£æ„Ÿï¼›<br>3. åŠ å°‘è®¸ç³–å¯ä»¥ä¸­å’Œç•ªèŒ„çš„é…¸å‘³ï¼Œæå‡æ•´ä½“å£æ„Ÿã€‚',
            nutrition: [
                {label: 'çƒ­é‡', value: 'çº¦ 280 å¤§å¡'},
                {label: 'è›‹ç™½è´¨', value: 'çº¦ 18g'},
                {label: 'ç»´ç”Ÿç´ ', value: 'å¯Œå«ç»´ç”Ÿç´ Cã€ç»´ç”Ÿç´ A'}
            ]
        },
        'çº¢çƒ§è‚‰': {
            image: 'ğŸ– çº¢çƒ§è‚‰',
            title: 'çº¢çƒ§è‚‰',
            category: 'æ­£é¤',
            time: '60åˆ†é’Ÿ',
            difficulty: 'â­â­â­ å›°éš¾',
            cookedCount: 1,
            isFavorite: true,
            ingredients: [
                {name: 'äº”èŠ±è‚‰', amount: '500g'},
                {name: 'å§œ', amount: '3ç‰‡'},
                {name: 'è‘±', amount: '2æ ¹'},
                {name: 'å†°ç³–', amount: '15g'},
                {name: 'ç”ŸæŠ½', amount: '2å¤§å‹º'},
                {name: 'è€æŠ½', amount: '1å°å‹º'},
                {name: 'æ–™é…’', amount: '1å¤§å‹º'},
                {name: 'å…«è§’', amount: '1ä¸ª'},
                {name: 'æ¡‚çš®', amount: '1å°æ®µ'},
                {name: 'ç›', amount: 'é€‚é‡'}
            ],
            steps: [
                'äº”èŠ±è‚‰åˆ‡æˆ2cmè§æ–¹çš„å—ï¼Œå†·æ°´ä¸‹é”…ï¼ŒåŠ å§œç‰‡ã€æ–™é…’ç„¯æ°´ï¼Œæ’‡å»æµ®æ²«åæå‡ºæ²¥å¹²ã€‚',
                'é”…ä¸­æ”¾å°‘è®¸æ²¹ï¼Œæ”¾å…¥å†°ç³–å°ç«ç‚’è‡³èåŒ–å‘ˆç„¦ç³–è‰²ã€‚',
                'å€’å…¥äº”èŠ±è‚‰ç¿»ç‚’å‡åŒ€ï¼Œè®©æ¯å—è‚‰éƒ½è£¹ä¸Šç³–è‰²ã€‚',
                'åŠ å…¥ç”ŸæŠ½ã€è€æŠ½ç¿»ç‚’å‡åŒ€ï¼Œæ”¾å…¥è‘±æ®µã€å§œç‰‡ã€å…«è§’ã€æ¡‚çš®ç‚’å‡ºé¦™å‘³ã€‚',
                'åŠ å…¥æ²¡è¿‡è‚‰çš„çƒ­æ°´ï¼Œå¤§ç«çƒ§å¼€åè½¬å°ç«æ…¢ç‚–40-50åˆ†é’Ÿã€‚',
                'æœ€åå¼€å¤§ç«æ”¶æ±ï¼ŒåŠ å°‘è®¸ç›è°ƒå‘³ï¼Œç¿»ç‚’è‡³æ±¤æ±æµ“ç¨ å³å¯ã€‚'
            ],
            tips: '1. ç‚’ç³–è‰²æ—¶å°ç«æ…¢ç‚’ï¼Œé¿å…ç‚’ç³Šå‘è‹¦ï¼›<br>2. ç‚–è‚‰æ—¶åŠ çƒ­æ°´ï¼ŒåŠ å†·æ°´ä¼šå¯¼è‡´è‚‰è´¨å˜æŸ´ï¼›<br>3. æ”¶æ±æ—¶è¦ä¸åœç¿»ç‚’ï¼Œé˜²æ­¢ç²˜é”…ã€‚',
            nutrition: [
                {label: 'çƒ­é‡', value: 'çº¦ 850 å¤§å¡'},
                {label: 'è›‹ç™½è´¨', value: 'çº¦ 30g'},
                {label: 'è„‚è‚ª', value: 'çº¦ 70g'}
            ]
        }
    };

    // å½“å‰èœè°±åç§°ï¼ˆä»URLå‚æ•°è·å–ï¼‰
    let currentRecipeName = '';

    // åˆå§‹åŒ–é¡µé¢
    document.addEventListener('DOMContentLoaded', function() {
        // è·å–URLå‚æ•°ä¸­çš„èœè°±åç§°
        const urlParams = new URLSearchParams(window.location.search);
        currentRecipeName = decodeURIComponent(urlParams.get('recipe') || '');

        // æ ¡éªŒèœè°±æ˜¯å¦å­˜åœ¨
        if (!currentRecipeName || !recipeDetailData[currentRecipeName]) {
            alert('æ— æ•ˆçš„èœè°±åç§°ï¼');
            goBack();
            return;
        }

        // å¡«å……é¡µé¢æ•°æ®
        renderRecipeDetail(currentRecipeName);
    });

    // æ¸²æŸ“èœè°±è¯¦æƒ…
    function renderRecipeDetail(recipeName) {
        const recipe = recipeDetailData[recipeName];
        const favoriteBtn = document.getElementById('detailFavoriteBtn');

        // åŸºç¡€ä¿¡æ¯
        document.getElementById('detailImage').textContent = recipe.image;
        document.getElementById('detailTitle').textContent = recipe.title;
        document.getElementById('detailCategory').textContent = recipe.category;
        document.getElementById('detailTime').textContent = recipe.time;
        document.getElementById('detailDifficulty').textContent = recipe.difficulty;

        // ä»localStorageè·å–çƒ¹é¥ªæ¬¡æ•°ï¼ˆä¼˜å…ˆå–æœ¬åœ°å­˜å‚¨ï¼Œæ— åˆ™ç”¨é»˜è®¤å€¼ï¼‰
        const savedCount = localStorage.getItem(`cooked_${recipeName}`);
        const cookedCount = savedCount ? parseInt(savedCount) : recipe.cookedCount;
        document.getElementById('detailCookedCount').textContent = `${cookedCount} æ¬¡`;

        // æ”¶è—çŠ¶æ€ï¼ˆä»localStorageæ¢å¤ï¼‰
        const savedFavorite = localStorage.getItem(`favorite_${recipeName}`) === 'true';
        recipeDetailData[recipeName].isFavorite = savedFavorite;

        // æ›´æ–°æ”¶è—æŒ‰é’®æ ·å¼å’Œæ–‡æœ¬
        if (savedFavorite) {
            favoriteBtn.classList.add('active');
            favoriteBtn.textContent = 'å·²æ”¶è—';
        } else {
            favoriteBtn.classList.remove('active');
            favoriteBtn.textContent = 'ä¸€é”®æ”¶è—';
        }

        // å¡«å……é£Ÿæåˆ—è¡¨
        const ingredientsContainer = document.getElementById('detailIngredients');
        ingredientsContainer.innerHTML = '';
        recipe.ingredients.forEach(ing => {
            ingredientsContainer.innerHTML += `
                <div class="ingredient-item">
                    <span class="ingredient-name">${ing.name}</span>
                    <span class="ingredient-amount">${ing.amount}</span>
                </div>
            `;
        });

        // å¡«å……æ­¥éª¤åˆ—è¡¨
        const stepsContainer = document.getElementById('detailSteps');
        stepsContainer.innerHTML = '';
        recipe.steps.forEach((step, index) => {
            stepsContainer.innerHTML += `
                <div class="step-item">
                    <div class="step-number">${index + 1}</div>
                    <div class="step-content">${step}</div>
                </div>
            `;
        });

        // å¡«å……å°è´´å£«
        document.querySelector('#detailTips .tips-content').innerHTML = recipe.tips;

        // å¡«å……è¥å…»ä¿¡æ¯
        const nutritionContainer = document.getElementById('detailNutrition');
        nutritionContainer.innerHTML = '';
        recipe.nutrition.forEach(item => {
            nutritionContainer.innerHTML += `
                <div class="detail-meta-item">
                    <span class="meta-label">${item.label}ï¼š</span>
                    <span>${item.value}</span>
                </div>
            `;
        });
    }

    // è¿”å›åˆ—è¡¨é¡µ
    function goBack() {
        window.location.href = 'æˆ‘çš„é£Ÿè°±.html';
    }

    // åˆ‡æ¢æ”¶è—çŠ¶æ€
    function toggleDetailFavorite() {
        if (!currentRecipeName) return;
        const recipe = recipeDetailData[currentRecipeName];
        const favoriteBtn = document.getElementById('detailFavoriteBtn');

        // åˆ‡æ¢æ”¶è—çŠ¶æ€
        recipe.isFavorite = !recipe.isFavorite;

        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        localStorage.setItem(`favorite_${currentRecipeName}`, recipe.isFavorite);

        // æ›´æ–°æŒ‰é’®æ ·å¼å’Œæ–‡æœ¬
        if (recipe.isFavorite) {
            favoriteBtn.classList.add('active');
            favoriteBtn.textContent = 'å·²æ”¶è—';
            alert(`å·²æ”¶è—ã€Œ${currentRecipeName}ã€åˆ°æˆ‘çš„æ”¶è—å¤¹ï¼`);
        } else {
            favoriteBtn.classList.remove('active');
            favoriteBtn.textContent = 'ä¸€é”®æ”¶è—';
            alert(`å·²å–æ¶ˆæ”¶è—ã€Œ${currentRecipeName}ã€`);
        }
    }

    // å¼€å§‹çƒ¹é¥ªï¼ˆè®¡å…¥æ¬¡æ•°ï¼‰
    function startCooking() {
        if (!currentRecipeName) return;

        // è·å–å½“å‰æ¬¡æ•°å¹¶+1
        const savedCount = localStorage.getItem(`cooked_${currentRecipeName}`);
        let newCount = savedCount ? parseInt(savedCount) + 1 : recipeDetailData[currentRecipeName].cookedCount + 1;

        // ä¿å­˜åˆ°localStorage
        localStorage.setItem(`cooked_${currentRecipeName}`, newCount);

        // æ›´æ–°é¡µé¢æ˜¾ç¤º
        document.getElementById('detailCookedCount').textContent = `${newCount} æ¬¡`;

        alert(`å¼€å§‹çƒ¹é¥ªï¼š${currentRecipeName}\n\nå·²è®¡å…¥çƒ¹é¥ªæ¬¡æ•°ï¼Œå½“å‰æ¬¡æ•°ï¼š${newCount} æ¬¡ï¼`);
    }
</script>
</body>
</html>